<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Content Manager</title>
  <link href="https://fonts.googleapis.com/css?family=Laila:300,500" rel="stylesheet">
  <link rel="apple-touch-icon" href="/favicon.png" />
  <link rel="icon" type="image/png" href="/favicon.png" sizes="192x192" />
</head>
<body>
  <!-- Include the script that builds the page and powers Netlify CMS -->
  <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>
  <script>
    {{ $mainCSS := resources.Get "styles/_global-styles/main.scss" | toCSS | minify | fingerprint }}
    {{ $bgLogoCSS := resources.Get "styles/components/bg-logo/bg-logo.scss" | toCSS | minify | fingerprint }}
    {{ $headerCSS := resources.Get "styles/components/header/header.scss" | toCSS | minify | fingerprint }}
    {{ $footerCSS := resources.Get "styles/components/footer/footer.scss" | toCSS | minify | fingerprint }}
    {{ $mobileMenuCSS := resources.Get "styles/components/mobile-menu/mobile-menu.scss" | toCSS | minify | fingerprint }}
    {{ $topButtonCSS := resources.Get "styles/components/top-button/top-button.scss" | toCSS | minify | fingerprint }}
    {{ $contentBackgroundCSS := resources.Get "styles/components/content-background/content-background.scss" | toCSS | minify | fingerprint }}
    {{ $textBlockCSS := resources.Get "styles/blocks/article-text-block/article-text-block.scss" | toCSS | minify | fingerprint }}
    {{ $mediaBlockCSS := resources.Get "styles/blocks/article-media-block/article-media-block.scss" | toCSS | minify | fingerprint }}
    {{ $specialBlockCSS := resources.Get "styles/blocks/article-special-block/article-special-block.scss" | toCSS | minify | fingerprint }}
    {{ $servicesBlockCSS := resources.Get "styles/blocks/services-block/services-block.scss" | toCSS | minify | fingerprint }}
    {{ $heroBlockCSS := resources.Get "styles/blocks/hero-block/hero-block.scss" | toCSS | minify | fingerprint }}

  	CMS.registerPreviewStyle({{ $mainCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $bgLogoCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $headerCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $footerCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $mobileMenuCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $topButtonCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $contentBackgroundCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $textBlockCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $mediaBlockCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $specialBlockCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $servicesBlockCSS.Permalink }});
  	CMS.registerPreviewStyle({{ $heroBlockCSS.Permalink }});
  	CMS.registerPreviewStyle("https://fonts.googleapis.com/css?family=Laila:300,500");


		var HomePreview = createClass({
		  render: function() {
		  	var entry = this.props.entry;
		  	var date = entry.getIn(['data','announcementDate']);

		    return h('main', {"className": "content-background background-1"},
		    	h('section', {"className": "article-special-block"},
		    		h('div', {"className" : "article-special-block__content"},
		    			h('h4', {"id" : "announcement-heading"}, date.toLocaleDateString('sv-SE', {year: 'numeric', month: 'numeric', day: 'numeric'})),
		    			h('div', {"id" : "announcement-content"}, entry.getIn(['data','announcementText']))
		    		)
		    	)
		    );
		  }
		});

		CMS.registerPreviewTemplate("home", HomePreview);
	</script>
</body>
</html>
